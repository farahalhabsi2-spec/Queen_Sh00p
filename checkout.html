<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ | ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨ ğŸ‘‘</title>

  <style>
    body{font-family:Tahoma,sans-serif;background:#fff0f8;margin:0}
    header{background:#e60073;color:#fff;text-align:center;padding:15px;font-size:20px;font-weight:bold}
    form{background:#fff;margin:25px auto;padding:25px;width:90%;max-width:420px;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,.15)}
    label{display:block;margin-top:12px;color:#e60073;font-weight:bold}
    input,select,textarea{width:100%;padding:10px;margin-top:6px;border:1px solid #ccc;border-radius:6px;font-size:15px}
    button{background:#e60073;color:#fff;border:none;border-radius:8px;padding:12px 20px;font-size:16px;font-weight:bold;margin-top:20px;cursor:pointer;width:100%}
    button:hover{background:#c40063}
    .hint{color:#777;font-size:13px;margin-top:4px}
  </style>
</head>
<body>

  <header>ğŸ’– Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ | ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨ ğŸ‘‘</header>

  <form id="orderForm">
    <label>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
    <input type="text" id="name" placeholder="Ø£Ø¯Ø®Ù„ÙŠ Ø§Ø³Ù…Ùƒ" required>

    <label>ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„</label>
    <textarea id="address" placeholder="Ø§Ù„ÙˆÙ„Ø§ÙŠØ© - Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø£Ù‚Ø±Ø¨ Ù…Ø¹Ù„Ù…" required></textarea>

    <label>ğŸ“± Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (Ø¨Ø¯ÙˆÙ† +)</label>
    <input type="tel" id="customerNumber" placeholder="Ù…Ø«Ø§Ù„: 9689xxxxxxx" required>
    <div class="hint">Ø£Ø¯Ø®Ù„ÙŠ Ø§Ù„Ø±Ù‚Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„: 9689xxxxxxx</div>

    <label>ğŸ’³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
    <select id="payment">
      <option value="Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…">Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
      <option value="Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„ÙÙŠØ²Ø§">Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„ÙÙŠØ²Ø§</option>
    </select>

    <button type="button" onclick="sendOrder()">âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
  </form>

  <script>
    function sendOrder(){
      const name = document.getElementById("name").value.trim();
      const address = document.getElementById("address").value.trim();
      const payment = document.getElementById("payment").value;
      const customerNumber = document.getElementById("customerNumber").value.trim();

      if(!name || !address || !customerNumber){
        alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.");
        return;
      }

      const items = JSON.parse(localStorage.getItem("cartItems")) || [];
      const total = localStorage.getItem("cartTotal") || "0.00";

      if(items.length === 0){
        alert("Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ©!");
        return;
      }

      const orderId = "Q" + Date.now().toString().slice(-6);
      const productList = items.map(it => `â€¢ ${it.name} - ${it.price} Ø±.Ø¹`).join('\n');

      const message =
`ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${orderId}
ğŸ‘‘ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù†: ${name}
ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}
ğŸ’³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${payment}

ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:
${productList}

ğŸ’µ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±.Ø¹
ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†Ø©: +${customerNumber}`;

      const shopNumbers = ["96896036550", "96894623872"];

      // Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…ØªØ¬Ø±
      shopNumbers.forEach((num, i) => {
        setTimeout(()=>{
          window.open(`https://wa.me/${num}?text=${encodeURIComponent(message)}`,'_blank');
        }, i * 700);
      });

      // Ø¥Ø±Ø³Ø§Ù„ Ù†Ø³Ø®Ø© Ù„Ù„Ø²Ø¨ÙˆÙ†Ø©
      setTimeout(()=>{
        const reply = `Ø´ÙƒØ±Ø§Ù‹ Ù„Ø·Ù„Ø¨Ùƒ Ù…Ù† ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨ ğŸ‘‘\n\n${message}\n\nØ³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ â¤ï¸`;
        window.open(`https://wa.me/${customerNumber}?text=${encodeURIComponent(reply)}`,'_blank');
      }, 1600);

      try{
        const orders = JSON.parse(localStorage.getItem("allOrders")||"[]");
        orders.push({
          orderId,
          name, address, payment,
          items,
          total,
          date: new Date().toLocaleString()
        });
        localStorage.setItem("allOrders", JSON.stringify(orders));
      }catch(e){}

      sessionStorage.setItem("lastOrderId", orderId);
      sessionStorage.setItem("lastOrderTotal", total);
      sessionStorage.setItem("lastOrderName", name);

      localStorage.removeItem("cartItems");
      localStorage.removeItem("cartTotal");

      setTimeout(()=>{
        window.location.href = "success.html";
      }, 2200);
    }
  </script>

</body>
</html>
