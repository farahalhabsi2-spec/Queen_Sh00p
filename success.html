<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨ ğŸ‘‘ | Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</title>
  <style>
    body {
      font-family: Tahoma, sans-serif;
      background: #fff0f8;
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      color: #444;
    }
    .form-box, .success-box {
      background: #fff;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
      width: 90%;
      max-width: 400px;
      text-align: center;
      animation: fadeIn 0.7s ease;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: scale(0.95);}
      to {opacity: 1; transform: scale(1);}
    }
    h2, h1 { color: #e60073; margin-bottom: 10px; }
    label { display: block; margin-top: 10px; color: #444; font-weight: bold; text-align: right; }
    input, select, textarea {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 15px;
    }
    button {
      width: 100%;
      padding: 12px;
      margin-top: 15px;
      border: none;
      border-radius: 6px;
      background: #e60073;
      color: #fff;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover { background: #c60060; }
    .hint { color: #777; font-size: 13px; margin-top: 4px; text-align: right; }
    .emoji { font-size: 50px; margin-bottom: 10px; }
    .details {
      background: #ffe4f2;
      border-radius: 10px;
      padding: 15px;
      margin-top: 10px;
      text-align: right;
      font-size: 15px;
      color: #333;
    }
    small {
      display: block;
      margin-top: 20px;
      font-size: 13px;
      opacity: 0.7;
    }
    .track-btn {
      background: #25d366;
      color: #fff;
      border: none;
      padding: 12px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
      font-weight: bold;
      margin-top: 10px;
    }
    .track-btn:hover { background: #1ebe5d; }
  </style>
</head>
<body>

  <!-- âœ… Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø·Ù„Ø¨ -->
  <div class="form-box" id="checkoutPage">
    <h2>ğŸ“ Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨</h2>
    <form id="checkoutForm">
      <label>ğŸ‘¤ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„</label>
      <input type="text" id="customerName" required>

      <label>ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙƒØ§Ù…Ù„</label>
      <textarea id="customerAddress" placeholder="Ø§Ù„ÙˆÙ„Ø§ÙŠØ© - Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø£Ù‚Ø±Ø¨ Ù…Ø¹Ù„Ù…" required></textarea>

      <label>ğŸ“ Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ (Ø¨Ø¯ÙˆÙ† +)</label>
      <input type="tel" id="customerPhone" placeholder="Ù…Ø«Ø§Ù„: 9689xxxxxxx" required>
      <div class="hint">Ø£Ø¯Ø®Ù„ÙŠ Ø§Ù„Ø±Ù‚Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø´ÙƒÙ„: 9689xxxxxxx</div>

      <label>ğŸ’³ Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</label>
      <select id="payment">
        <option value="Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…">Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</option>
        <option value="Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„ÙÙŠØ²Ø§">Ø§Ù„Ø¯ÙØ¹ Ø¹Ø¨Ø± Ø§Ù„ÙÙŠØ²Ø§</option>
      </select>

      <button type="button" onclick="confirmOrder()">âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨</button>
    </form>
  </div>

  <!-- âœ… ØµÙØ­Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ -->
  <div class="success-box" id="successPage" style="display:none;">
    <div class="emoji">ğŸ’–</div>
    <h1>ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!</h1>
    <p>Ø´ÙƒØ±Ù‹Ø§ Ù„ØªØ³ÙˆÙ‚Ùƒ Ù…Ù† <strong>ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨ ğŸ‘‘</strong><br> Ø³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ù„ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø·Ù„Ø¨ â¤ï¸</p>

    <div class="details">
      <p>ğŸ”¢ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: <span id="orderId">...</span></p>
      <p>ğŸ’µ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="orderTotal">...</span> Ø±.Ø¹</p>
      <p>ğŸ‘¤ Ø§Ù„Ø²Ø¨ÙˆÙ†Ø©: <span id="orderName">...</span></p>
    </div>

    <button onclick="goHome()">ğŸ  Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
    <button class="track-btn" onclick="trackOrder()">ğŸ’¬ ØªØªØ¨Ø¹ Ø·Ù„Ø¨ÙŠ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</button>

    <small>Â© 2025 ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨ Â· Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© ğŸ‘‘</small>
  </div>

  <script>
    function confirmOrder(){
      const name = document.getElementById("customerName").value.trim();
      const address = document.getElementById("customerAddress").value.trim();
      const phone = document.getElementById("customerPhone").value.trim();
      const payment = document.getElementById("payment").value;

      if(!name || !address || !phone){
        alert("ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.");
        return;
      }

      const items = JSON.parse(localStorage.getItem("cartItems")) || [];
      const total = localStorage.getItem("cartTotal") || "0.00";

      if(items.length === 0){
        alert("Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ©!");
        return;
      }

      const orderId = "Q" + Date.now().toString().slice(-6);
      const productList = items.map(it => `â€¢ ${it.name} - ${it.price} Ø±.Ø¹`).join('\n');

      const message =
`ğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${orderId}
ğŸ‘‘ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù…Ù†: ${name}
ğŸ“ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: ${address}
ğŸ’³ Ø§Ù„Ø¯ÙØ¹: ${payment}

ğŸ“¦ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:
${productList}

ğŸ’µ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±.Ø¹
ğŸ“± Ø±Ù‚Ù… Ø§Ù„Ø²Ø¨ÙˆÙ†Ø©: +${phone}`;

      const shopNumbers = ["96896036550", "96894623872"];
      shopNumbers.forEach((num, i)=>{
        setTimeout(()=>{
          window.open(`https://wa.me/${num}?text=${encodeURIComponent(message)}`,'_blank');
        }, i * 800);
      });

      // Ø¥Ø±Ø³Ø§Ù„ Ù†Ø³Ø®Ø© Ù„Ù„Ø²Ø¨ÙˆÙ†Ø©
      setTimeout(()=>{
        const reply = `Ø´ÙƒØ±Ø§Ù‹ Ù„Ø·Ù„Ø¨Ùƒ Ù…Ù† ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨ ğŸ‘‘\n\n${message}\n\nØ³Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ â¤ï¸`;
        window.open(`https://wa.me/${phone}?text=${encodeURIComponent(reply)}`,'_blank');
      }, 2000);

      // Ø¹Ø±Ø¶ ØµÙØ­Ø© Ø§Ù„Ù†Ø¬Ø§Ø­
      document.getElementById("orderId").textContent = orderId;
      document.getElementById("orderTotal").textContent = total;
      document.getElementById("orderName").textContent = name;
      document.getElementById("checkoutPage").style.display = "none";
      document.getElementById("successPage").style.display = "block";

      // Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ Ù…Ø¤Ù‚ØªØ§Ù‹ Ù„ØªØªØ¨Ø¹ Ù„Ø§Ø­Ù‚
      localStorage.setItem("lastOrderId", orderId);
      localStorage.setItem("lastOrderName", name);
      localStorage.setItem("lastOrderTotal", total);

      // ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©
      localStorage.removeItem("cartItems");
      localStorage.removeItem("cartTotal");
    }

    function goHome(){
      window.location.href = "index.html";
    }

    function trackOrder(){
      const orderId = localStorage.getItem("lastOrderId") || "Ø¨Ø¯ÙˆÙ† Ø±Ù‚Ù…";
      const name = localStorage.getItem("lastOrderName") || "Ø²Ø¨ÙˆÙ†Ø© ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨";
      const total = localStorage.getItem("lastOrderTotal") || "0.00";
      const msg = `ğŸ“¦ ØªØªØ¨Ø¹ Ø·Ù„Ø¨ÙŠ ÙÙŠ ÙƒÙˆÙŠÙ† Ø´ÙˆØ¨ ğŸ‘‘\n\nğŸ†” Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨: ${orderId}\nğŸ‘¤ Ø§Ù„Ø§Ø³Ù…: ${name}\nğŸ’µ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: ${total} Ø±.Ø¹\n\nØ£Ø±ØºØ¨ Ø¨Ù…Ø¹Ø±ÙØ© Ø­Ø§Ù„Ø© Ø§Ù„Ø·Ù„Ø¨ ğŸŒ¸`;
      window.open(`https://wa.me/96896036550?text=${encodeURIComponent(msg)}`,'_blank');
    }
  </script>

</body>
</html>
